var Chatbot=function(c,$){"use strict";function Pe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var U={exports:{}},B={exports:{}},S={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var de;function _e(){if(de)return S;de=1;var r=typeof Symbol=="function"&&Symbol.for,s=r?Symbol.for("react.element"):60103,u=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,p=r?Symbol.for("react.strict_mode"):60108,i=r?Symbol.for("react.profiler"):60114,m=r?Symbol.for("react.provider"):60109,f=r?Symbol.for("react.context"):60110,O=r?Symbol.for("react.async_mode"):60111,w=r?Symbol.for("react.concurrent_mode"):60111,l=r?Symbol.for("react.forward_ref"):60112,_=r?Symbol.for("react.suspense"):60113,I=r?Symbol.for("react.suspense_list"):60120,k=r?Symbol.for("react.memo"):60115,j=r?Symbol.for("react.lazy"):60116,A=r?Symbol.for("react.block"):60121,R=r?Symbol.for("react.fundamental"):60117,N=r?Symbol.for("react.responder"):60118,L=r?Symbol.for("react.scope"):60119;function h(n){if(typeof n=="object"&&n!==null){var Y=n.$$typeof;switch(Y){case s:switch(n=n.type,n){case O:case w:case a:case i:case p:case _:return n;default:switch(n=n&&n.$$typeof,n){case f:case l:case j:case k:case m:return n;default:return Y}}case u:return Y}}}function M(n){return h(n)===w}return S.AsyncMode=O,S.ConcurrentMode=w,S.ContextConsumer=f,S.ContextProvider=m,S.Element=s,S.ForwardRef=l,S.Fragment=a,S.Lazy=j,S.Memo=k,S.Portal=u,S.Profiler=i,S.StrictMode=p,S.Suspense=_,S.isAsyncMode=function(n){return M(n)||h(n)===O},S.isConcurrentMode=M,S.isContextConsumer=function(n){return h(n)===f},S.isContextProvider=function(n){return h(n)===m},S.isElement=function(n){return typeof n=="object"&&n!==null&&n.$$typeof===s},S.isForwardRef=function(n){return h(n)===l},S.isFragment=function(n){return h(n)===a},S.isLazy=function(n){return h(n)===j},S.isMemo=function(n){return h(n)===k},S.isPortal=function(n){return h(n)===u},S.isProfiler=function(n){return h(n)===i},S.isStrictMode=function(n){return h(n)===p},S.isSuspense=function(n){return h(n)===_},S.isValidElementType=function(n){return typeof n=="string"||typeof n=="function"||n===a||n===w||n===i||n===p||n===_||n===I||typeof n=="object"&&n!==null&&(n.$$typeof===j||n.$$typeof===k||n.$$typeof===m||n.$$typeof===f||n.$$typeof===l||n.$$typeof===R||n.$$typeof===N||n.$$typeof===L||n.$$typeof===A)},S.typeOf=h,S}var C={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pe;function Ae(){return pe||(pe=1,process.env.NODE_ENV!=="production"&&function(){var r=typeof Symbol=="function"&&Symbol.for,s=r?Symbol.for("react.element"):60103,u=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,p=r?Symbol.for("react.strict_mode"):60108,i=r?Symbol.for("react.profiler"):60114,m=r?Symbol.for("react.provider"):60109,f=r?Symbol.for("react.context"):60110,O=r?Symbol.for("react.async_mode"):60111,w=r?Symbol.for("react.concurrent_mode"):60111,l=r?Symbol.for("react.forward_ref"):60112,_=r?Symbol.for("react.suspense"):60113,I=r?Symbol.for("react.suspense_list"):60120,k=r?Symbol.for("react.memo"):60115,j=r?Symbol.for("react.lazy"):60116,A=r?Symbol.for("react.block"):60121,R=r?Symbol.for("react.fundamental"):60117,N=r?Symbol.for("react.responder"):60118,L=r?Symbol.for("react.scope"):60119;function h(t){return typeof t=="string"||typeof t=="function"||t===a||t===w||t===i||t===p||t===_||t===I||typeof t=="object"&&t!==null&&(t.$$typeof===j||t.$$typeof===k||t.$$typeof===m||t.$$typeof===f||t.$$typeof===l||t.$$typeof===R||t.$$typeof===N||t.$$typeof===L||t.$$typeof===A)}function M(t){if(typeof t=="object"&&t!==null){var D=t.$$typeof;switch(D){case s:var J=t.type;switch(J){case O:case w:case a:case i:case p:case _:return J;default:var Oe=J&&J.$$typeof;switch(Oe){case f:case l:case j:case k:case m:return Oe;default:return D}}case u:return D}}}var n=O,Y=w,oe=f,se=m,ae=s,ie=l,V=a,ce=j,ue=k,z=u,le=i,q=p,F=_,H=!1;function fe(t){return H||(H=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),e(t)||M(t)===O}function e(t){return M(t)===w}function o(t){return M(t)===f}function b(t){return M(t)===m}function v(t){return typeof t=="object"&&t!==null&&t.$$typeof===s}function d(t){return M(t)===l}function T(t){return M(t)===a}function y(t){return M(t)===j}function g(t){return M(t)===k}function E(t){return M(t)===u}function P(t){return M(t)===i}function x(t){return M(t)===p}function W(t){return M(t)===_}C.AsyncMode=n,C.ConcurrentMode=Y,C.ContextConsumer=oe,C.ContextProvider=se,C.Element=ae,C.ForwardRef=ie,C.Fragment=V,C.Lazy=ce,C.Memo=ue,C.Portal=z,C.Profiler=le,C.StrictMode=q,C.Suspense=F,C.isAsyncMode=fe,C.isConcurrentMode=e,C.isContextConsumer=o,C.isContextProvider=b,C.isElement=v,C.isForwardRef=d,C.isFragment=T,C.isLazy=y,C.isMemo=g,C.isPortal=E,C.isProfiler=P,C.isStrictMode=x,C.isSuspense=W,C.isValidElementType=h,C.typeOf=M}()),C}var ye;function he(){return ye||(ye=1,process.env.NODE_ENV==="production"?B.exports=_e():B.exports=Ae()),B.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var X,ve;function Me(){if(ve)return X;ve=1;var r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable;function a(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function p(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var m={},f=0;f<10;f++)m["_"+String.fromCharCode(f)]=f;var O=Object.getOwnPropertyNames(m).map(function(l){return m[l]});if(O.join("")!=="0123456789")return!1;var w={};return"abcdefghijklmnopqrst".split("").forEach(function(l){w[l]=l}),Object.keys(Object.assign({},w)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return X=p()?Object.assign:function(i,m){for(var f,O=a(i),w,l=1;l<arguments.length;l++){f=Object(arguments[l]);for(var _ in f)s.call(f,_)&&(O[_]=f[_]);if(r){w=r(f);for(var I=0;I<w.length;I++)u.call(f,w[I])&&(O[w[I]]=f[w[I]])}}return O},X}var Z,ge;function G(){if(ge)return Z;ge=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Z=r,Z}var Q,be;function me(){return be||(be=1,Q=Function.call.bind(Object.prototype.hasOwnProperty)),Q}var ee,we;function ke(){if(we)return ee;we=1;var r=function(){};if(process.env.NODE_ENV!=="production"){var s=G(),u={},a=me();r=function(i){var m="Warning: "+i;typeof console<"u"&&console.error(m);try{throw new Error(m)}catch{}}}function p(i,m,f,O,w){if(process.env.NODE_ENV!=="production"){for(var l in i)if(a(i,l)){var _;try{if(typeof i[l]!="function"){var I=Error((O||"React class")+": "+f+" type `"+l+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof i[l]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw I.name="Invariant Violation",I}_=i[l](m,l,O,f,null,s)}catch(j){_=j}if(_&&!(_ instanceof Error)&&r((O||"React class")+": type specification of "+f+" `"+l+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof _+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),_ instanceof Error&&!(_.message in u)){u[_.message]=!0;var k=w?w():"";r("Failed "+f+" type: "+_.message+(k??""))}}}}return p.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(u={})},ee=p,ee}var re,Te;function Ie(){if(Te)return re;Te=1;var r=he(),s=Me(),u=G(),a=me(),p=ke(),i=function(){};process.env.NODE_ENV!=="production"&&(i=function(f){var O="Warning: "+f;typeof console<"u"&&console.error(O);try{throw new Error(O)}catch{}});function m(){return null}return re=function(f,O){var w=typeof Symbol=="function"&&Symbol.iterator,l="@@iterator";function _(e){var o=e&&(w&&e[w]||e[l]);if(typeof o=="function")return o}var I="<<anonymous>>",k={array:N("array"),bigint:N("bigint"),bool:N("boolean"),func:N("function"),number:N("number"),object:N("object"),string:N("string"),symbol:N("symbol"),any:L(),arrayOf:h,element:M(),elementType:n(),instanceOf:Y,node:ie(),objectOf:se,oneOf:oe,oneOfType:ae,shape:ce,exact:ue};function j(e,o){return e===o?e!==0||1/e===1/o:e!==e&&o!==o}function A(e,o){this.message=e,this.data=o&&typeof o=="object"?o:{},this.stack=""}A.prototype=Error.prototype;function R(e){if(process.env.NODE_ENV!=="production")var o={},b=0;function v(T,y,g,E,P,x,W){if(E=E||I,x=x||g,W!==u){if(O){var t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw t.name="Invariant Violation",t}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var D=E+":"+g;!o[D]&&b<3&&(i("You are manually calling a React.PropTypes validation function for the `"+x+"` prop on `"+E+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),o[D]=!0,b++)}}return y[g]==null?T?y[g]===null?new A("The "+P+" `"+x+"` is marked as required "+("in `"+E+"`, but its value is `null`.")):new A("The "+P+" `"+x+"` is marked as required in "+("`"+E+"`, but its value is `undefined`.")):null:e(y,g,E,P,x)}var d=v.bind(null,!1);return d.isRequired=v.bind(null,!0),d}function N(e){function o(b,v,d,T,y,g){var E=b[v],P=q(E);if(P!==e){var x=F(E);return new A("Invalid "+T+" `"+y+"` of type "+("`"+x+"` supplied to `"+d+"`, expected ")+("`"+e+"`."),{expectedType:e})}return null}return R(o)}function L(){return R(m)}function h(e){function o(b,v,d,T,y){if(typeof e!="function")return new A("Property `"+y+"` of component `"+d+"` has invalid PropType notation inside arrayOf.");var g=b[v];if(!Array.isArray(g)){var E=q(g);return new A("Invalid "+T+" `"+y+"` of type "+("`"+E+"` supplied to `"+d+"`, expected an array."))}for(var P=0;P<g.length;P++){var x=e(g,P,d,T,y+"["+P+"]",u);if(x instanceof Error)return x}return null}return R(o)}function M(){function e(o,b,v,d,T){var y=o[b];if(!f(y)){var g=q(y);return new A("Invalid "+d+" `"+T+"` of type "+("`"+g+"` supplied to `"+v+"`, expected a single ReactElement."))}return null}return R(e)}function n(){function e(o,b,v,d,T){var y=o[b];if(!r.isValidElementType(y)){var g=q(y);return new A("Invalid "+d+" `"+T+"` of type "+("`"+g+"` supplied to `"+v+"`, expected a single ReactElement type."))}return null}return R(e)}function Y(e){function o(b,v,d,T,y){if(!(b[v]instanceof e)){var g=e.name||I,E=fe(b[v]);return new A("Invalid "+T+" `"+y+"` of type "+("`"+E+"` supplied to `"+d+"`, expected ")+("instance of `"+g+"`."))}return null}return R(o)}function oe(e){if(!Array.isArray(e))return process.env.NODE_ENV!=="production"&&(arguments.length>1?i("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):i("Invalid argument supplied to oneOf, expected an array.")),m;function o(b,v,d,T,y){for(var g=b[v],E=0;E<e.length;E++)if(j(g,e[E]))return null;var P=JSON.stringify(e,function(W,t){var D=F(t);return D==="symbol"?String(t):t});return new A("Invalid "+T+" `"+y+"` of value `"+String(g)+"` "+("supplied to `"+d+"`, expected one of "+P+"."))}return R(o)}function se(e){function o(b,v,d,T,y){if(typeof e!="function")return new A("Property `"+y+"` of component `"+d+"` has invalid PropType notation inside objectOf.");var g=b[v],E=q(g);if(E!=="object")return new A("Invalid "+T+" `"+y+"` of type "+("`"+E+"` supplied to `"+d+"`, expected an object."));for(var P in g)if(a(g,P)){var x=e(g,P,d,T,y+"."+P,u);if(x instanceof Error)return x}return null}return R(o)}function ae(e){if(!Array.isArray(e))return process.env.NODE_ENV!=="production"&&i("Invalid argument supplied to oneOfType, expected an instance of array."),m;for(var o=0;o<e.length;o++){var b=e[o];if(typeof b!="function")return i("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+H(b)+" at index "+o+"."),m}function v(d,T,y,g,E){for(var P=[],x=0;x<e.length;x++){var W=e[x],t=W(d,T,y,g,E,u);if(t==null)return null;t.data&&a(t.data,"expectedType")&&P.push(t.data.expectedType)}var D=P.length>0?", expected one of type ["+P.join(", ")+"]":"";return new A("Invalid "+g+" `"+E+"` supplied to "+("`"+y+"`"+D+"."))}return R(v)}function ie(){function e(o,b,v,d,T){return z(o[b])?null:new A("Invalid "+d+" `"+T+"` supplied to "+("`"+v+"`, expected a ReactNode."))}return R(e)}function V(e,o,b,v,d){return new A((e||"React class")+": "+o+" type `"+b+"."+v+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+d+"`.")}function ce(e){function o(b,v,d,T,y){var g=b[v],E=q(g);if(E!=="object")return new A("Invalid "+T+" `"+y+"` of type `"+E+"` "+("supplied to `"+d+"`, expected `object`."));for(var P in e){var x=e[P];if(typeof x!="function")return V(d,T,y,P,F(x));var W=x(g,P,d,T,y+"."+P,u);if(W)return W}return null}return R(o)}function ue(e){function o(b,v,d,T,y){var g=b[v],E=q(g);if(E!=="object")return new A("Invalid "+T+" `"+y+"` of type `"+E+"` "+("supplied to `"+d+"`, expected `object`."));var P=s({},b[v],e);for(var x in P){var W=e[x];if(a(e,x)&&typeof W!="function")return V(d,T,y,x,F(W));if(!W)return new A("Invalid "+T+" `"+y+"` key `"+x+"` supplied to `"+d+"`.\nBad object: "+JSON.stringify(b[v],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(e),null,"  "));var t=W(g,x,d,T,y+"."+x,u);if(t)return t}return null}return R(o)}function z(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(z);if(e===null||f(e))return!0;var o=_(e);if(o){var b=o.call(e),v;if(o!==e.entries){for(;!(v=b.next()).done;)if(!z(v.value))return!1}else for(;!(v=b.next()).done;){var d=v.value;if(d&&!z(d[1]))return!1}}else return!1;return!0;default:return!1}}function le(e,o){return e==="symbol"?!0:o?o["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&o instanceof Symbol:!1}function q(e){var o=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":le(o,e)?"symbol":o}function F(e){if(typeof e>"u"||e===null)return""+e;var o=q(e);if(o==="object"){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return o}function H(e){var o=F(e);switch(o){case"array":case"object":return"an "+o;case"boolean":case"date":case"regexp":return"a "+o;default:return o}}function fe(e){return!e.constructor||!e.constructor.name?I:e.constructor.name}return k.checkPropTypes=p,k.resetWarningCache=p.resetWarningCache,k.PropTypes=k,k},re}var te,Ee;function je(){if(Ee)return te;Ee=1;var r=G();function s(){}function u(){}return u.resetWarningCache=s,te=function(){function a(m,f,O,w,l,_){if(_!==r){var I=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw I.name="Invariant Violation",I}}a.isRequired=a;function p(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:p,element:a,elementType:a,instanceOf:p,node:a,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:u,resetWarningCache:s};return i.PropTypes=i,i},te}var xe;function Re(){if(xe)return U.exports;if(xe=1,process.env.NODE_ENV!=="production"){var r=he(),s=!0;U.exports=Ie()(r.isElement,s)}else U.exports=je()();return U.exports}var $e=Re();const K=Pe($e);class Ne{constructor(s,u){this.apiKey=s,this.handlers=u,this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=3,this.baseReconnectDelay=1e3,this.isConnecting=!1,this.inactivityTimeout=null,this.manuallyEnded=!1,this.resetInactivityTimer()}connect(){this.isConnecting||(this.manuallyEnded=!1,console.log("Connecting to WebSocket..."),this.ws=new WebSocket(`ws://localhost:3333/ws?apiKey=${this.apiKey}`),this.ws.onopen=()=>{var s,u;console.log("WebSocket connected"),this.isConnecting=!1,this.reconnectAttempts=0,(u=(s=this.handlers).onConnect)==null||u.call(s)},this.ws.onmessage=s=>{var u,a,p,i,m,f,O,w;try{const l=JSON.parse(s.data);switch(l.event){case"ready":console.log("Ready event received"),(a=(u=this.handlers).onReady)==null||a.call(u);break;case"typing":console.log("Typing event received"),(i=(p=this.handlers).onTyping)==null||i.call(p,l.data.status);break;case"assistant_message":console.log("Assistant message received"),(f=(m=this.handlers).onMessage)==null||f.call(m,l.data.assistant_text);break;default:console.warn("Unknown event received:",l.event)}}catch(l){console.error("Message parsing error:",l),(w=(O=this.handlers).onError)==null||w.call(O,l)}},this.ws.onclose=()=>{console.log("WebSocket closed"),this.isConnecting=!1,this.handleReconnect()},this.ws.onerror=s=>{var u,a;console.error("WebSocket error:",s),(a=(u=this.handlers).onError)==null||a.call(u,s)})}resetInactivityTimer(){this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.inactivityTimeout=setTimeout(()=>{console.log("Connection closed due to inactivity"),this.disconnect()},12e4)}sendMessage(s){var u,a,p;if(this.resetInactivityTimer(),((u=this.ws)==null?void 0:u.readyState)===WebSocket.OPEN){const i={event:"user_message",data:{user_text:s}};console.log("Sending message:",i),this.ws.send(JSON.stringify(i)),(p=(a=this.handlers).onLocalMessage)==null||p.call(a,s)}else throw new Error("WebSocket is not connected")}handleReconnect(){var u,a;if(this.manuallyEnded){console.log("Manual disconnect - skipping reconnect");return}if(this.reconnectAttempts>=this.maxReconnectAttempts){(a=(u=this.handlers).onError)==null||a.call(u,new Error("Max reconnection attempts reached"));return}const s=this.baseReconnectDelay*Math.pow(2,this.reconnectAttempts);this.reconnectAttempts++,console.log(`Attempting to reconnect in ${s}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>this.connect(),s)}disconnect(s=!1){s&&(this.manuallyEnded=!0),this.inactivityTimeout&&clearTimeout(this.inactivityTimeout),this.ws&&(console.log("Disconnecting WebSocket"),this.ws.close(),this.ws=null)}}const We=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:c.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),qe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),c.jsx("path",{d:"M22 2 11 13"})]}),De=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M18 6 6 18"}),c.jsx("path",{d:"m6 6 12 12"})]}),Le=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M18.36 6.64A9 9 0 0 1 20.77 15"}),c.jsx("path",{d:"M6.16 6.16a9 9 0 1 0 12.68 12.68"}),c.jsx("path",{d:"M12 2v4"})]}),Se=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[c.jsx("path",{d:"M12 8V4H8"}),c.jsx("rect",{width:"16",height:"12",x:"4",y:"8",rx:"2"}),c.jsx("path",{d:"M2 14h2"}),c.jsx("path",{d:"M20 14h2"}),c.jsx("path",{d:"M15 13v2"}),c.jsx("path",{d:"M9 13v2"})]}),Ye=(r,s=30)=>{const[u,a]=$.useState(""),p=$.useRef(null);return $.useEffect(()=>{let i=0;const m=setInterval(()=>{i<r.length?(a(r.substring(0,i+1)),i++,p.current&&p.current.scrollIntoView({behavior:"smooth",block:"end"})):clearInterval(m)},s);return()=>clearInterval(m)},[r,s]),{displayedText:u,containerRef:p}},Ce=({message:r,type:s})=>{const{displayedText:u,containerRef:a}=Ye(s==="assistant"?r:"");return c.jsxs("div",{ref:a,className:`flex ${s==="user"?"justify-end":"justify-start"} items-end gap-2`,children:[s==="assistant"&&c.jsx("div",{className:"h-8 w-8 flex items-center justify-center rounded-full bg-purple-600",children:c.jsx(Se,{className:"w-5 h-5 text-white"})}),c.jsx("div",{className:`max-w-[80%] p-3 rounded-lg ${s==="user"?"bg-purple-600 text-white rounded-br-none font-semibold text-sm":"bg-gray-100 text-gray-800 rounded-bl-none font-semibold text-sm"}`,children:s==="assistant"?u:r})]})};Ce.propTypes={message:K.string.isRequired,type:K.string.isRequired};const Fe=()=>c.jsxs("div",{className:"flex gap-2 py-3 px-2 max-w-[80%] bg-gray-100 rounded-lg rounded-bl-none w-24",children:[c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-bounce [animation-delay:-0.3s]"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-bounce [animation-delay:-0.15s]"}),c.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-bounce"})]}),ne=({apiKey:r})=>{const[s,u]=$.useState(!1),[a,p]=$.useState([]),[i,m]=$.useState(""),[f,O]=$.useState(!1),[w,l]=$.useState(!1),[_,I]=$.useState(!1),k=$.useRef(null),j=$.useRef(null);$.useEffect(()=>(j.current=new Ne(r,{onConnect:()=>l(!0),onDisconnect:()=>l(!1),onTyping:()=>O(!0),onMessage:h=>{O(!1),p(M=>[...M,{role:"assistant",content:h}])},onLocalMessage:h=>{p(M=>[...M,{role:"user",content:h}])}}),()=>{var h;return(h=j.current)==null?void 0:h.disconnect()}),[r]),$.useEffect(()=>{s&&!w&&(j.current.manuallyEnded=!1,j.current.connect())},[s,w]),$.useEffect(()=>{k.current&&(k.current.scrollTop=k.current.scrollHeight)},[a,f]);const A=h=>{if(h.preventDefault(),!(!i.trim()||!w))try{j.current.sendMessage(i),m("")}catch(M){console.error("Failed to send message:",M)}};ne.propTypes={apiKey:K.string.isRequired};const R=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),A(h))},N=()=>{s||I(!1),u(!s)},L=()=>{u(!1),j.current.disconnect(!0),p([]),l(!1),I(!0)};return c.jsxs("div",{className:"fixed bottom-4 right-4 z-[1000]",children:[" ",c.jsx("button",{onClick:N,className:`${s?"hidden":"flex"} items-center justify-center w-14 h-14 rounded-full bg-purple-600 hover:bg-purple-700 text-white shadow-lg transition-all duration-200 fixed bottom-4 right-4`,children:c.jsx(We,{className:"w-6 h-6"})}),c.jsxs("div",{className:`${s?"scale-100 opacity-100":"scale-0 opacity-0"} origin-bottom-right transition-all duration-200 w-[400px] h-[600px] bg-white rounded-lg shadow-xl flex flex-col`,children:[c.jsxs("div",{className:"bg-purple-600 p-4 rounded-t-lg flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-7 w-7 flex items-center justify-center rounded-full bg-white",children:c.jsx(Se,{className:"w-5 h-5 text-purple-600"})}),c.jsx("h2",{className:"text-white text-lg font-semibold",children:"Chatbot"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:L,className:"text-white hover:text-red-200 transition-colors",title:"End Chat",children:c.jsx(Le,{className:"w-6 h-6"})}),c.jsx("button",{onClick:()=>u(!1),className:"text-white hover:text-purple-200 transition-colors",children:c.jsx(De,{className:"w-6 h-6"})})]})]}),c.jsxs("div",{ref:k,className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map((h,M)=>c.jsx(Ce,{message:h.content,type:h.role==="user"?"user":"assistant"},M)),f&&c.jsx(Fe,{})]}),c.jsx("form",{onSubmit:A,className:"p-4 border-t",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("textarea",{value:i,onChange:h=>m(h.target.value),onKeyDown:R,placeholder:"Type a message...",className:"flex-1 resize-none p-2 border rounded-lg focus:outline-none focus:border-purple-600 max-h-32",rows:"1"}),c.jsx("button",{type:"submit",disabled:!w,className:"p-2 text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",onClick:A,children:c.jsx(qe,{className:"w-5 h-5"})})]})})]})]})};return ne.propTypes={apiKey:K.string.isRequired},ne}(jsxRuntime,React);
